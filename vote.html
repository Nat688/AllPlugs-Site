---
layout: default
---

<link rel="stylesheet" type="text/css" href="styles/style_vote.css">
<body>
  	<h1>Bienvenue chez <span class="title_site">AllPlugs</span></h1>
  	<h2>Votez pour le Serveur Minecraft</h2>

	<!-- VOTES -->
	<section class="vote-section">
  <!-- ----------------------------- Timer 1h30 ----------------------------- -->
		<div class="vote-card">
			<span><b>Vote NÂ°1</b></span>
			<!-- TIMER -->
			<p id="timer" class="vote-timer">Vous pouvez voter !</p>
			<!-- BOUTON -->
			<a href="https://serveur-prive.net/minecraft/allplug/vote" target="_blank" class="vote-btn" id="vote1">Vote Now</a>
		</div>
  <!-- ----------------------------- Timer 2h ----------------------------- -->
		<div class="vote-card">
			<span><b>Vote NÂ°2</b></span>
			<!-- TIMER -->
			<p id="temps" class="vote-timer">Vous pouvez voter !</p>
			<!-- BOUTON -->
			<a href="https://top-serveurs.net/minecraft/vote/allplugs-6948489f3565f" target="_blank" class="vote-btn" id="vote2"> Vote Now</a>
		</div>
	</section>
  <!-- ----------------------------- SCRIPT ----------------------------- -->
  	<script>
		function lancerTimer(id, dureeSecondes, storageKey) {
			const el = document.getElementById(id);
			if (localStorage.getItem(storageKey + "_done") === "1") {
				el.textContent = "Vous pouvez votÃ© !";
				return;
			}
			function formatTemps(sec) {
				let h = Math.floor(sec / 3600);
				let m = Math.floor((sec % 3600) / 60);
				let s = sec % 60;
				return (
					String(h).padStart(2, "0") + ":" +
					String(m).padStart(2, "0") + ":" +
					String(s).padStart(2, "0")
				);
			}
      // VÃ©rifier si la date de fin existe dÃ©jÃ  //
			let fin = localStorage.getItem(storageKey);
			if (!fin) {
				fin = Date.now() + dureeSecondes * 1000;
				localStorage.setItem(storageKey, fin);
			} else {
				fin = parseInt(fin, 10);
			}
			function tick() {
				let restant = Math.floor((fin - Date.now()) / 1000);
				if (restant <= 0) {
					localStorage.setItem(storageKey + "_done", "1");
					clearInterval(interval);
					el.textContent = "Vous pouvez votÃ© !";
					localStorage.removeItem(storageKey);
					return;
				}
				el.textContent = formatTemps(restant);
			}
			const interval = setInterval(tick, 1000);
			tick(); // affichage immÃ©diat //
		}

    // Lancer le timer seulement au clic sur le bouton de vote
		document.getElementById("vote1").addEventListener("click", () => {
			localStorage.removeItem("timer_1h30_done"); // ðŸ”´ RESET si terminÃ© //
			lancerTimer("timer", 1 * 60 * 60 + 30 * 60, "timer_1h30");
		});
		document.getElementById("vote2").addEventListener("click", () => {
			localStorage.removeItem("timer_2h_done"); // ðŸ”´ RESET si terminÃ© //
			lancerTimer("temps", 2 * 60 * 60, "timer_2h");
		});
	  // Stockage des timers //
		if (localStorage.getItem("timer_1h30")) {
			lancerTimer("timer", 1 * 60 * 60 + 30 * 60, "timer_1h30");
		}
		if (localStorage.getItem("timer_2h")) {
			lancerTimer("temps", 2 * 60 * 60, "timer_2h");
		}
	</script>
</body>
